# 2021년 10월4일 (월)

### URI를 설계할 때 가장 중요한 것은 리소스 식별이다. 리소스의 의미는 무엇일까? 회원 관리 정보를 예를 들면, 회원이라는 개념 자체가 바로 리소스다. 그러므로, 리소스를 식별하기 위해서는 회원이라는 리소스만 식별 하면 된다. -> 회원 리소스를 URI에 매핑시켜야 한다.

### URI를 설계할 때, 리소스와 행위를 분리시켜야 한다.

#### URI는 리소스만 식별, 행위(조회, 등록, 수정, 삭제)는 HTTP 메서드를 사용해야 한다.

## HTTP 메서드

### 주요 메서드에는 GET, POST, PUT, PATCH, DELETE

### GET -> 리소스 조회, 서버에 전달하고 싶은 데이터는 query(쿼리 파라미터, 쿼리 스트링)를 통해서 전달한다. 메세지 바디를 이용해서 전달할 수 있지만, 지원하지 않는 곳이 많아서 권장하지 않음.

### POST -> 요청 데이터 처리, 메세지 바디를 통해 서버로 요청 데이터를 전달한다. 서버는 요청 데이터를 받아서 처리한다. 주로 전달된 데이터로 신규 리소스 등록, 프로세스 처리에 사용한다.

#### POST 요청은 주로 새 리소스를 생성하고 요청 데이터를 처리하는데 주로 사용된다.

### PUT -> 리소스를 대체하는 것이다. 리소스가 있으면 대체, 없으면 생성한다. 즉, 덮어씌운다. POST와 다른 점은 PUT은 클라이언트가 리소스 위치를 알고 URI를 지정한다는 것이다.

### PATCH -> PUT 메서드가 데이터를 전부 변경시킨다는 문제점이 있어 PATCH가 등장하게 되었다. PATCH는 데이터를 PUT과는 다르게 부분 변경한다.

### DELETE -> 리소스를 제거할 때 쓰면 된다.

## HTTP 메서드의 속성

### HTTP 메서드 속성에는 안전(Safe Methods), 멱등(Idempotent Methods), 캐시가능(Cacheable Methods)가 있다.

### 안전이 의미하는 것은 호출을 해도 리소스를 변경하지 않는다는 것을 의미한다. 대표적으로 GET 메서드가 해당된다.

### 멱등은 한 번 호출하든 두 번 호출하든 결과가 똑같음을 의미한다. ex) GET -> 여러번 조회해도 같은 결과가 조회된다. PUT -> 결과를 대체한다. 같은 요청을 여러번 해도 최종 결과는 같다. DELETE -> 결과를 삭제한다. 같은 요청을 여러번 해도 식제된 결과는 똑같다. 하지만 POST는 멱등이 아니다. POST -> 두 번 호출하면 예를 들어, 결제 시스템에서 두번 결제가 될 수도 있다.

#### 하지만 재요청 중간에 다른 곳에서 리소스를 변경하면 바뀐 데이터를 조회한다. 즉, 외부 요인으로 중간에 리소스가 변경되는 것 까지는 고려하지 않는다.

### 캐시가능 -> 응답 결과 리소스를 캐시해서 사용해도 되는가? / GET, HEAD, POST, PATCH는 캐시 가능하다. 하지만, 실제로는 GET, HEAD 정도만 캐시로 사용한다. POST, PATCH는 본문 내용까지 캐시 키로 고려해야 하는데 구현이 쉽지 않다.
